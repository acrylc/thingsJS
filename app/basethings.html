
// Implementation of base digital output class
// Examples : LED
// At creation, is initalized as : 
  socket = io.connect('http://localhost:8080');
<polymer-element name="digital-output" attributes="value arduinoId pin" >
	
	<template >
		
		<style>
			:host {
				display:inline-block;
				width: 40px ;
				height: 40px;
				border: 3px solid rgb(205,205,210);
			}
		</style>
	</template>

	<script>
		Polymer('digital-output', {

			value: 0, 
			arduinoId : 0, 
			pin: 0,
		
			created: function(){
				console.log('created Digital Output');
				var that = this;

				var data = {
					pin: that.pin, 
					id: that.id, 
					type : 'output'
				}
				socket.emit('initPin', {msg:data});
			},

			//For value change, 
			//Digital Write msg to corresponding physical acctuator
			valueChanged: function(){
				var that = this;
				if (this.value == 0){
					socket.emit('writeToPin', {
						msg:'digitalWrite', 
						pin: that.pin, 
						arduinoId: that.arduinoId, 
						value : 0
					});
				} else {
					socket.emit('writeToArduino', {
						msg:'digitalWrite', 
						pin: that.pin, 
						arduinoId: that.arduinoId, 
						value : 1
					})

				}
			}
		});
	</script>

</polymer-element>




// Implementation of base digital input class
// Examples : push button
// At creation, is initalized as : 
  socket = io.connect('http://localhost:8080');
<polymer-element name="digital-output" attributes="value arduinoId pin" >
	
	<template >
		
		<style>
			:host {
				display:inline-block;
				width: 40px ;
				height: 40px;
				border: 3px solid rgb(205,205,210);
			}
		</style>
	</template>

	<script>
		Polymer('digital-output', {

			value: 0, 
			arduinoId : 0, 
			pin: 0,
			
			created: function(){
				console.log('created Digital Input');
				var that = this;

				var data = {
					pin: that.pin, 
					id: that.id, 
					type : 'input'
				}
				socket.emit('initPin', {msg:data});

				// //When digital sensor receives input, update value of digital element
				// socket.on('digitalRead', function(msg){
				// 	if ()
				// })
			},

			//For value change, 
			//Digital Write msg to corresponding physical acctuator
			valueChanged: function(){
				var that = this;
				if (this.value == 0){
					socket.emit('writeToPin', {
						msg:'digitalWrite', 
						pin: that.pin, 
						arduinoId: that.arduinoId, 
						value : 0
					});
				} else {
					socket.emit('writeToArduino', {
						msg:'digitalWrite', 
						pin: that.pin, 
						arduinoId: that.arduinoId, 
						value : 1
					})

				}
			}
		});
	</script>

</polymer-element>


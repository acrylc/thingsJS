



// **************** Digital LED  
// Actuator : listens to virtual value and turns ON or OFF (or sets 255 value) physically 
// Initalially value set to 0, OFF
// Functionality : 
// 	Set value of LED

</polymer-element>
<polymer-element name="x-led" style="background-color: {{color}}"  extends="digital-output">
	
	<template >
		
		<style>
			:host {
				display:inline-block;
				width: 40px ;
				height: 40px;
				border-radius: 50%;
				border: 3px solid rgb(205,0,0);
				transition: background-color 0.3s ease-in, border-color 0.3s ease-in;
				-webkit-transition: background-color 0.3s ease-in, border-color 0.3s ease-in; 
			}
		</style>
	</template>

	<script>
		Polymer('x-led', {

			color: 'red',
		
			// When element is created, listens to proper entry in database based on
			// {arduinoId, pin} pair	
			created: function(){
				this.super();
				var that = this;
				$(this).css({'background-color':this.color});
				socket.on('digitalWrite', function(){
					that.value = !that.value;
				})

			},
			colorChanged: function(){
				$(this).css({'background-color':this.color});
			}, 

			//For value change, update styling of element and send
			//Digital Write msg to corresponding physical LED

			valueChanged: function(){
				console.log('in value changed');
				var that = this;
				if (this.value == 0){
					$(this).css({'background-color':'rgb(50,60,70)'});
					$(this).css({'border-color':'black'});
				} else {
					$(this).css({'background-color':this.color});
					$(this).css({'border-color':'rgb(200,0,0'});
				}
				this.super();

			}
		});
	</script>



</polymer-element>



// **************** BUTTON  
// Input : Click
// Functionality : 
// 	Set value of LED
<polymer-element name="x-button" on-click="{{buttonClick}}">
	
	<template >
		
		<style>
			:host {
				display:inline-block;
				width: 40px ;
				height: 40px;
				border: 3px solid rgb(225,225,210);
				background-color: rgb(205,205,190);
			}
			:host:hover{
				background-color: rgb(215,215,200);
			}
			:host:active{
				background-color: rgb(190,190,175);
			}
		</style>

	</template>

	<script>
		Polymer('x-button', {

			arduinoId : 0, 
			pin : 0,
			connections :[ 
				{arduinoId:0, pin:1}
			],
		
			// When element is created, listens to proper entry in database based on
			// {arduinoId, pin} pair	
			created: function(){
				console.log('created BUTTON');
				var data = {
					pin: this.pin, 
					arduinoId: this.arduinoId, 
					type : 'input'
				}
				socket.emit('initPin', {msg:data});
			},
			buttonClick: function(){
				console.log('Button arduinoID:'+ this.arduinoId +' PIN:'+ this.pin +' was clicked');
				var data = {
					sender: {'pin':this.pin, 'arduinoId':this.arduinoId},
					receiver : this.connections,
					type: 'button click', 
					value: '255'
				}
				socket.emit('input', { 'msg' : data });
			}
		});
	</script>

</polymer-element>